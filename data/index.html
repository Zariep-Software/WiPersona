<!DOCTYPE html>
<html lang="es">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<meta property="og:site_name" content="WiPersona - PNGTuber on Web Browser" />
	<meta property="og:title" content="WiPersona - PNGTuber on Web Browser" />
	<meta property="og:image" content="https://zariep-software.github.io/WiPersona/data/preview.jpg" />
	<meta property="og:description" content="WiPersona is a lightweight tool that let you run a simple PNGTuber on web browser" />
	<meta property="og:url" content="https://zariep-software.github.io" />
	<meta property="og:type" content="website" />

	<meta name="twitter:card" content="summary_large_image" />
	<meta name="twitter:title" content="WiPersona - PNGTuber on Web Browser" />
	<meta name="twitter:description" content="WiPersona is a lightweight tool that let you run a simple PNGTuber on web browser" />
	<meta name="twitter:image" content="https://zariep-software.github.io/WiPersona/data/preview.jpg" />

	<title>WiPersona</title>
	<link rel="stylesheet" href="style.css">
	<link rel="stylesheet" href="avatareffects.css">
	<!--Using SJTSW as translation system-->
	<script src="translations.js"></script>
	<script src="external/SJTSW/sjtsw.js"></script>
</head>

<body id="body" class="body">
	<input type="checkbox" id="togglemenu">
	<label for="togglemenu">
	<div id="canvas"></div>
		<div id="Avatar" title="You can drag me" class="hidden ghost">
			<div id="avatarmenu">
				<span>â†˜</span>
			</div>
		</div>
</label>

<div class="SettingsWindow">

	<!-- LEFT COLUMN -->
	<div class="mainsettings settingsview">
		<!--AVATAR SETTINGS-->
		<div class="title">
			<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
				viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
				stroke-linecap="round" stroke-linejoin="round"
				class="icon icon-tabler icons-tabler-outline icon-tabler-user">
				<path stroke="none" d="M0 0h24v24H0z" fill="none" />
				<path d="M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0" />
				<path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
			</svg>
			<h2 id="str-avatarsettings">Avatar Settings</h2>
		</div>

	<div>
	<span id="str-avatarfolder">Avatar workspace</span>
		<button id="workspace-btn">Default</button>
	</div>

		<div>
			<label id="muteButton" class="customButton">
				<img id="mutePreview" src="#" alt="Image Preview">
				<figcaption>Mute</figcaption>
				<input class="hidden" type="file" id="AvatarMuted" accept="image/*">
			</label>
			<label id="talkingButton" class="customButton">
				<img id="talkingPreview" src="#" alt="Image Preview">
				<figcaption>Talk</figcaption>
				<input class="hidden" type="file" id="AvatarSpeaking" accept="image/*">
			</label>
			<label id="screamingButton" class="customButton">
				<img id="screamingPreview" src="#" alt="Image Preview">
				<figcaption>Scream</figcaption>
				<input class="hidden" type="file" id="AvatarScreaming" accept="image/*">
			</label>
		</div>

		<span id="str-avataratcenter">Avatar at center:</span>
		<input type="checkbox" id="togglecenter" hidden>
		<label class="custom-checkbox" for="togglecenter">
			<span class="checkmark"></span>
		</label>

		<div class="ifnotcenter">
			<span id="str-xposition">X:</span>
			<input type="number" id="StrPosX" min="1" max="9999" value="10">
			<span id="str-yposition">Y:</span>
			<input type="number" id="StrPosY" min="1" max="9999" value="10">
		</div>

	<div>
		<span id="str-avatarsize">Avatar Size (px):</span>
		<input type="number" id="StrAvatarSize" min="1" max="9999" value="512"> <br>
	</div>

		<span id="str-intalkeffect">In-talk effect:</span>
		<select id="EffectSelect">
			<option value="none">None</option>
			<option value="bounce">Bounce</option>
			<option value="gelatine">Gelatine</option>
			<option value="pulse">Pulse</option>
			<option value="shake">Shake</option>
			<option value="swing">Swing</option>
			<option value="swingtop">Swing (From top)</option>
		</select> <br>

		<span id="str-brightnesseffect">Brightness effect:</span>
		<select id="DimEffectSelect">
			<option value="none">None</option>
			<option value="bright">Bright when speaking</option>
			<option value="dim">Dim if muted</option>
		</select> <br>

		<span id="str-effectontalktoscream">Effect on Talk to Scream:</span>
			<label class="custom-checkbox">
		<input type="checkbox" id="effectonscream">
		<span class="checkmark"></span>
	</label>

		<!--BACKGROUND SETTINGS-->
	<div class="title">
		<svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-photo"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8h.01" /><path d="M3 6a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v12a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3v-12z" /><path d="M3 16l5 -5c.928 -.893 2.072 -.893 3 0l5 5" /><path d="M14 14l1 -1c.928 -.893 2.072 -.893 3 0l3 3" /></svg>
		<h2 id="str-backgroundsettings">Background Settings</h2>
	</div>
		<span id="str-backgroundcolor">Background Color:</span>
		<input type="color" id="bgcolor"><br>

		<span id="str-imagebackground">Image background:</span>
	<label class="custom-checkbox">
		<input type="checkbox" id="showbg">
		<span class="checkmark"></span>
	</label>
		<div class="ifshowbg">
			<form action="#" method="post" enctype="multipart/form-data">
				<span id="str-selectbackground">Select background: </span>
				<input type="file" id="SelectBG" name="imagen" accept="image/*">
			</form>
		</div>

		<!--VOICE SETTINGS-->
	<div class="title">
		<svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-microphone"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 2m0 3a3 3 0 0 1 3 -3h0a3 3 0 0 1 3 3v5a3 3 0 0 1 -3 3h0a3 3 0 0 1 -3 -3z" /><path d="M5 10a7 7 0 0 0 14 0" /><path d="M8 21l8 0" /><path d="M12 17l0 4" /></svg>
		<h2 id="str-voicesettings">Voice Settings</h2>
	</div>
		<h5 id="str-micaccess">Give mic access to completely start the program</h5>
		<button id="RequestMicrophone">Request mic access</button>
	<div id="Status0" class="hidden">
		<p class="ph" id="permissiongranted">Permission granted. Microphone is available.</p>
		<br>
	</div>
		<p id="Status1">Permission denied or there was an error. If you are using OBS Studio "Browser", use "--enable-media-stream" flag.</p>

		<span class="ph" id="VoiceStatus">Voice Status: Silence</span><br>
		<select class="ph" id="MicrophoneList"></select>
		<button class="ph" id="ToggleMicrophone">Pause/Resume Microphone</button>

		<div class="ThresholdContainer">
			<label id="str-speechthreshold">Speech Threshold: </label>
			<input type="range" id="Threshold" min="0" max="100" value="15">
			<span id="ThresholdValue">15</span>
		</div>

		<div class="ThresholdContainer">
			<label id="str-screamthreshold">Scream Threshold: </label>
			<input type="range" id="ThresholdScream" min="0" max="100" value="30">
			<span id="ThresholdValueScream">30</span>
		</div>

		<!--VOICE PREVIEW-->
		<div id="VolumeLevelContainer" style="position: relative;">
			<div id="ThresholdLine"></div>
			<div id="ThresholdLineScream"></div>
		</div>
		<div id="VolumeBar">
			<div id="VolumeLevel"></div>
		</div>
	</div>

	<!-- MIDDLE COLUMN -->
	<div class="draggableimages settingsview">

	<div class="title">
		<svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-drag-drop"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19 11v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2" /><path d="M13 13l9 3l-4 2l-2 4l-3 -9" /><path d="M3 3l0 .01" /><path d="M7 3l0 .01" /><path d="M11 3l0 .01" /><path d="M15 3l0 .01" /><path d="M3 7l0 .01" /><path d="M3 11l0 .01" /><path d="M3 15l0 .01" /></svg>
		<h2>Draggable Images</h2>
	</div>

		<span id="str-avataratcenter">Enable extra images</span>
		<input type="checkbox" id="toggledraggable" hidden>
		<label class="custom-checkbox" for="toggledraggable">
			<span class="checkmark"></span>
		</label>

		<div class="add-images-section">

				<div class="title">
					<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
						viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
						stroke-linecap="round" stroke-linejoin="round"
						class="icon icon-tabler icons-tabler-outline icon-tabler-folder">
						<path stroke="none" d="M0 0h24v24H0z" fill="none" />
						<path d="M5 4h4l3 3h7a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-11a2 2 0 0 1 2 -2" />
					</svg>
					<h3>Import Local Files</h3>
				</div>
			<div class="import-panel">	
				<div class="file-input">
			<label id="importLocalButton" class="customButton">
<!--<span>Select Image</span>-->
				<span>Choose file</span>
				<img class="hidden"  id="imagePreview" src="#" alt="Image Preview">
				<input class="hidden" type="file" id="fileInput" accept="image/*">
			</label>
				</div>
<!--
				<button class="btn" onclick="loadImportedImages()">Add Local Images</button>
-->
			</div>
				<div class="title">
					<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
						viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
						stroke-linecap="round" stroke-linejoin="round"
						class="icon icon-tabler icons-tabler-outline icon-tabler-world-www">
						<path stroke="none" d="M0 0h24v24H0z" fill="none" />
						<path d="M19.5 7a9 9 0 0 0 -7.5 -4a8.991 8.991 0 0 0 -7.484 4" />
						<path d="M11.5 3a16.989 16.989 0 0 0 -1.826 4" />
						<path d="M12.5 3a16.989 16.989 0 0 1 1.828 4" />
						<path d="M19.5 17a9 9 0 0 1 -7.5 4a8.991 8.991 0 0 1 -7.484 -4" />
						<path d="M11.5 21a16.989 16.989 0 0 1 -1.826 -4" />
						<path d="M12.5 21a16.989 16.989 0 0 0 1.828 -4" />
						<path d="M2 10l1 4l1.5 -4l1.5 4l1 -4" />
						<path d="M17 10l1 4l1.5 -4l1.5 4l1 -4" />
						<path d="M9.5 10l1 4l1.5 -4l1.5 4l1 -4" />
					</svg>
					<h3>Add Remote Image</h3>
				</div>
			<div class="remote-panel">
				<input type="url" id="remoteUrl" class="remote-input" placeholder="Enter image URL...">
				<button class="btn" onclick="addRemoteImage()">+</button>
			</div>
		</div>

		<hr>
		<div class="action-buttons">
			<button class="btn danger" onclick="clearAllImages()">Clear All Images</button>
			<button class="btn secondary" onclick="exportPositions()">Export Positions</button>
			<button class="btn secondary" onclick="importPositions()">Import Positions</button>
		</div>

		<div id="status" class="status"></div>
	</div>

	<!-- RIGHT COLUMN -->
	<div class="credits settingsview">
		<h1>WiPersona</h1>
		<h3>v1.3-beta2</h3>
		<h3 id="str-credits">
			<a href="credits.html" target="_blank">Credits</a>
		</h3>
		<h3 id="str-sourcecode">
			<a href="https://github.com/Zariep-Software/WiPersona" target="_blank">Source code</a>
		</h3>
		<h3 id="str-onlinemanual">
			<a href="https://github.com/Zariep-Software/WiPersona/wiki" target="_blank">Online manual</a>
		</h3>

		<div id="content">
			<button id="str-saveconfig" onclick="SaveSettings()">Save config</button>
			<pre id="str-configurationsaved" class="hidden">Configuration saved.</pre>
			<button id="str-restoredefaults" class="btn danger" onclick="RestoreSettings()">Restore defaults</button>
			<button id="str-showlinktothisconfig" onclick="ShareLink()">Show link to this config</button>
		</div>

		<h6 id="LinkToConfig" class="LinkToConfig"></h6>
	</div>
</div>

	<div class="overlay" id="workspace-overlay">
		<div class="overlay-content" id="workspace-list">
			<button class="close-btn" onclick="closeOverlay()">Close</button>
			<br><br>
			<div class="ws-entry">
				<input style="width:90%;" type="text" id="new-workspace-name" placeholder="New workspace name">
				<button onclick="createNewWorkspace()">Create Workspace</button>
			</div>
			<div id="workspace-container"></div>
		</div>
	</div>

		<script type="module" src="main.js"></script>
		<script src="config.js"></script>
		<script src="draggableimages.js"></script>
		<script>SJTSW_TranslatePage();</script> 
</body>
</html>
